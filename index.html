<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Event Registration Hub</title>
  <style>
    :root {
      --primary: #3b82f6;
      --primary-dark: #1e40af;
      --accent: #6366f1;
      --light-bg: #f8fafc;
      --text-dark: #1e293b;
      --text-light: #64748b;
    }

    * {
      box-sizing: border-box;
      transition: 0.2s ease;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: var(--light-bg);
      color: var(--text-dark);
      margin: 0;
      padding: 0;
    }

    header {
      background: linear-gradient(90deg, var(--primary), var(--accent));
      color: white;
      padding: 20px 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    header h1 {
      margin: 0;
      font-size: 1.8em;
    }

    header button {
      background: white;
      color: var(--primary-dark);
      border: none;
      padding: 10px 16px;
      border-radius: 6px;
      font-weight: 600;
      cursor: pointer;
    }
    header button:hover { background: #e0e7ff; }

    .container {
      max-width: 1100px;
      margin: 30px auto;
      padding: 0 20px;
    }

    .stats {
      display: flex;
      gap: 20px;
      margin-bottom: 25px;
      flex-wrap: wrap;
    }

    .stat-card {
      background: white;
      flex: 1 1 250px;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      text-align: center;
    }

    .stat-card h2 {
      margin: 0;
      color: var(--primary-dark);
      font-size: 2em;
    }

    .filters {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-bottom: 20px;
    }

    .filters input, .filters select {
      padding: 10px 12px;
      border: 1px solid #cbd5e1;
      border-radius: 6px;
      flex: 1;
    }

    .event-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 20px;
    }

    .event {
      background: white;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      position: relative;
    }

    .event:hover { box-shadow: 0 5px 15px rgba(0,0,0,0.1); }

    .event-title {
      font-weight: 600;
      font-size: 1.2em;
      color: var(--primary-dark);
      margin-bottom: 6px;
    }

    .event-desc {
      font-size: 0.9em;
      color: var(--text-light);
      margin-bottom: 10px;
    }

    .event-info {
      font-size: 0.85em;
      color: var(--text-dark);
      margin-bottom: 12px;
    }

    .event button {
      background: var(--primary);
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.9em;
      font-weight: 600;
    }

    .event button:hover { background: var(--primary-dark); }

    .modal {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.4);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 100;
    }

    .modal-content {
      background: white;
      border-radius: 12px;
      padding: 25px;
      width: 90%;
      max-width: 450px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      position: relative;
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .close-btn {
      position: absolute;
      top: 10px;
      right: 15px;
      background: none;
      border: none;
      font-size: 20px;
      color: var(--text-light);
      cursor: pointer;
    }

    .form-group { margin-bottom: 12px; }

    label { font-size: 0.9em; margin-bottom: 5px; display: block; color: var(--text-dark); }

    input {
      width: 100%;
      padding: 8px;
      border: 1px solid #cbd5e1;
      border-radius: 6px;
    }

    .notice {
      margin-top: 10px;
      padding: 10px;
      border-radius: 6px;
      font-size: 0.9em;
      text-align: center;
    }
    .success { background: #dcfce7; color: #166534; }
    .error { background: #fee2e2; color: #991b1b; }

    footer {
      text-align: center;
      font-size: 0.8em;
      padding: 20px;
      background: linear-gradient(90deg, var(--accent), var(--primary-dark));
      color: white;
      margin-top: 50px;
    }
  </style>
</head>
<body>
  <header>
    <h1>Event Hub</h1>
    <button id="addEvent">+ Add Sample Event</button>
  </header>

  <div class="container">
    <div class="stats">
      <div class="stat-card">
        <h2 id="totalEvents">0</h2>
        <p>Total Events</p>
      </div>
      <div class="stat-card">
        <h2 id="totalRegistrations">0</h2>
        <p>Total Registrations</p>
      </div>
    </div>

    <div class="filters">
      <input type="text" id="search" placeholder="Search events by title..." />
      <select id="venueFilter">
        <option value="">All Venues</option>
      </select>
    </div>

    <div class="event-list" id="eventList"></div>
  </div>

  <div id="modal" class="modal" style="display: none;">
    <div class="modal-content">
      <button class="close-btn" onclick="closeModal()">×</button>
      <h2 id="eventTitle"></h2>
      <p id="eventInfo"></p>

      <div class="form-group">
        <label>Name:</label>
        <input type="text" id="name" />
      </div>
      <div class="form-group">
        <label>Email:</label>
        <input type="email" id="email" />
      </div>
      <div class="form-group">
        <label>Phone:</label>
        <input type="tel" id="phone" />
      </div>
      <button onclick="registerUser()">Register</button>
      <div id="notice"></div>
    </div>
  </div>

  <footer>
    © 2025 Event Hub | Designed for Internship Presentation
  </footer>

  <script>
    const eventList = document.getElementById('eventList');
    const modal = document.getElementById('modal');
    const eventTitle = document.getElementById('eventTitle');
    const eventInfo = document.getElementById('eventInfo');
    const notice = document.getElementById('notice');
    const totalEvents = document.getElementById('totalEvents');
    const totalRegistrations = document.getElementById('totalRegistrations');
    const venueFilter = document.getElementById('venueFilter');

    let selectedEvent = null;
    let events = JSON.parse(localStorage.getItem('events')) || [
      { id: '1', title: 'TechTalk: Future Trends', desc: 'A session on new technologies.', date: '2025-11-10', time: '10:00 AM', venue: 'Auditorium A', seats: 100 },
      { id: '2', title: 'Hack Night', desc: 'A mini hackathon event.', date: '2025-11-20', time: '06:00 PM', venue: 'Lab 3', seats: 40 }
    ];

    let registrations = JSON.parse(localStorage.getItem('registrations')) || {};

    function saveData() {
      localStorage.setItem('events', JSON.stringify(events));
      localStorage.setItem('registrations', JSON.stringify(registrations));
    }

    function renderEvents() {
      const searchQuery = document.getElementById('search').value.toLowerCase();
      const venueValue = venueFilter.value;
      eventList.innerHTML = '';

      let totalReg = 0;
      events.forEach(ev => {
        const regCount = (registrations[ev.id] || []).length;
        totalReg += regCount;
        if (venueValue && ev.venue !== venueValue) return;
        if (!ev.title.toLowerCase().includes(searchQuery)) return;

        const div = document.createElement('div');
        div.className = 'event';
        div.innerHTML = `
          <div class='event-title'>${ev.title}</div>
          <div class='event-desc'>${ev.desc}</div>
          <div class='event-info'>${ev.date} • ${ev.time} • ${ev.venue}</div>
          <div class='event-info'><strong>${regCount}</strong> / ${ev.seats} registered</div>
          <button onclick='openModal(${JSON.stringify(ev).replace(/'/g, "&#39;")})'>Register</button>
        `;
        eventList.appendChild(div);
      });

      totalEvents.textContent = events.length;
      totalRegistrations.textContent = totalReg;

      updateVenueOptions();
    }

    function openModal(ev) {
      selectedEvent = ev;
      modal.style.display = 'flex';
      eventTitle.textContent = ev.title;
      eventInfo.textContent = `${ev.date} • ${ev.time} • ${ev.venue}`;
      notice.innerHTML = '';
      document.getElementById('name').value = '';
      document.getElementById('email').value = '';
      document.getElementById('phone').value = '';
    }

    function closeModal() { modal.style.display = 'none'; }

    function registerUser() {
      const name = document.getElementById('name').value.trim();
      const email = document.getElementById('email').value.trim();
      const phone = document.getElementById('phone').value.trim();

      if (!name) return showNotice('Enter your name.', true);
      if (!/\S+@\S+\.\S+/.test(email)) return showNotice('Invalid email.', true);
      if (!/^[0-9]{7,15}$/.test(phone)) return showNotice('Invalid phone number.', true);

      const key = selectedEvent.id;
      registrations[key] = registrations[key] || [];

      if (registrations[key].some(r => r.email === email)) {
        return showNotice('This email is already registered.', true);
      }

      if (registrations[key].length >= selectedEvent.seats) {
        return showNotice('Event full.', true);
      }

      registrations[key].push({ name, email, phone, time: new Date().toISOString() });
      saveData();
      showNotice('Registration successful!', false);
      renderEvents();
    }

    function showNotice(msg, isError) {
      notice.className = 'notice ' + (isError ? 'error' : 'success');
      notice.textContent = msg;
    }

    document.getElementById('addEvent').onclick = () => {
      const id = Date.now().toString();
      events.unshift({ id, title: 'Workshop: Sensors & Circuits', desc: 'A hands-on electronics workshop.', date: '2025-12-05', time: '02:00 PM', venue: 'Lab Hall', seats: 50 });
      saveData();
      renderEvents();
    };

    function updateVenueOptions() {
      const venues = [...new Set(events.map(e => e.venue))];
      venueFilter.innerHTML = '<option value="">All Venues</option>' + venues.map(v => `<option value="${v}">${v}</option>`).join('');
    }

    document.getElementById('search').addEventListener('input', renderEvents);
    venueFilter.addEventListener('change', renderEvents);

    renderEvents();
  </script>
</body>
</html>